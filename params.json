{"name":"Project week4","tagline":"Coursera course project ","body":"#  project_week4\r\n \r\nLoad the necessary packages in R : \r\n\r\n`library(caret)\r\nlibrary(ggplot2)\r\nlibrary(rattle)\r\nlibrary(rpart)\r\nlibrary(randomForest)`\r\n\r\n\r\n###LOAD DATA\r\n\r\nThe Data are the one provided by coursera (link). One large test sample and one very small test sample to predict when the model is completed.  \r\n\r\n`pml<-read.csv(\"https://d396qusza40orc.cloudfront.net/predmachlearn/pml-training.csv\", header = T , sep= \",\") ##load data train `\r\n\r\n\r\n`test<-read.csv(\"https://d396qusza40orc.cloudfront.net/predmachlearn/pml-testing.csv\", header=T , sep=\",\") ## load 20 cases test data` \r\n\r\n###CLEAN DATA \r\n\r\n First task is to clean the data to be able to see clearly the variable that can be used for the model. \r\n\r\nFirst,  let's remove the not so relevant columns : time stamps, ids and names\r\n\r\n`pml_clean<-pml[,-c(1,2,3,4,5,6,7)]`\r\n\r\n###DEAL WITH NA's VALUE\r\n\r\nSecondly, we need to get rid of the variable wiht too many NAs. Here's hte threshold is 10,000 per column (around 50%)  \r\n\r\n`na<-is.na(pml_clean) ## count na `\r\n\r\n`col_na<-colSums(na) ##  count na for each columns`\r\n\r\n`col_remove<-which(Col_na>10000)`\r\n\r\n`pml_clean2<-pml_clean[,-col_remove]`\r\n\r\n###CREATE TRAIN AND TEST SAMPLE FROM DATA  \r\n\r\nThe idea is to be able to train and test the model before predicting the 20 cases. \r\n\r\n`set.seed(25930) ## can be reproduce `\r\n\r\n`intrain<-createDataPartition(pml_clean2$classe, p=0.6, list=F) ## create a train//test in full set 60%//40% `\r\n\r\n`train_pml<-pml_clean2[intrain,] #train`\r\n\r\n`test_pml<-pml_clean2[-intrain,] # test //validation before prediction on 20 case for exam `\r\n\r\n###CHOOSE PREDICTOR \r\nLet's remove the predictor with near zero variance (very little variance will not help a lot in  classification)\r\n\r\n`nearZero<-nearZeroVar(train_pml, saveMetrics = T) ## give the variable with near zero variance so wecan exclude them`\r\n\r\n 53 variables don't have near zero variance and can be used in the project \r\n\r\n###CREATION OF THE NEW TRAIN AND TEST  SAMPLE \r\nAt this point, we need to remove the irrelevant columns in  the train and testing set. \r\n\r\n`mytrain<-train_pml[,c('roll_belt'\r\n                      ,'pitch_belt'\r\n                      ,'yaw_belt'\r\n                      ,'total_accel_belt'\r\n                      ,'gyros_belt_x'\r\n                      ,'gyros_belt_y'\r\n                      ,'gyros_belt_z'\r\n                      ,'accel_belt_x'\r\n                      ,'accel_belt_y'\r\n                      ,'accel_belt_z'\r\n                      ,'magnet_belt_x'\r\n                      ,'magnet_belt_y'\r\n                      ,'magnet_belt_z'\r\n                      ,'roll_arm'\r\n                      ,'pitch_arm'\r\n                      ,'yaw_arm'\r\n                      ,'total_accel_arm'\r\n                      ,'gyros_arm_x'\r\n                      ,'gyros_arm_y'\r\n                      ,'gyros_arm_z'\r\n                      ,'accel_arm_x'\r\n                      ,'accel_arm_y'\r\n                      ,'accel_arm_z'\r\n                      ,'magnet_arm_x'\r\n                      ,'magnet_arm_y'\r\n                      ,'magnet_arm_z'\r\n                      ,'roll_dumbbell'\r\n                      ,'pitch_dumbbell'\r\n                      ,'yaw_dumbbell'\r\n                      ,'total_accel_dumbbell'\r\n                      ,'gyros_dumbbell_x'\r\n                      ,'gyros_dumbbell_y'\r\n                      ,'gyros_dumbbell_z'\r\n                      ,'accel_dumbbell_x'\r\n                      ,'accel_dumbbell_y'\r\n                      ,'accel_dumbbell_z'\r\n                      ,'magnet_dumbbell_x'\r\n                      ,'magnet_dumbbell_y'\r\n                      ,'magnet_dumbbell_z'\r\n                      ,'roll_forearm'\r\n                      ,'pitch_forearm'\r\n                      ,'yaw_forearm'\r\n                      ,'total_accel_forearm'\r\n                      ,'gyros_forearm_x'\r\n                      ,'gyros_forearm_y'\r\n                      ,'gyros_forearm_z'\r\n                      ,'accel_forearm_x'\r\n                      ,'accel_forearm_y'\r\n                      ,'accel_forearm_z'\r\n                      ,'magnet_forearm_x'\r\n                      ,'magnet_forearm_y'\r\n                      ,'magnet_forearm_z'\r\n                      ,'classe')]`\r\n                      \r\n`mytest<-test_pml[,c('roll_belt' ,'pitch_belt' ,'yaw_belt' ,'total_accel_belt' ,'gyros_belt_x'  ,'gyros_belt_y','gyros_belt_z' ,'accel_belt_x' ,'accel_belt_y'\r\n                      ,'accel_belt_z'\r\n                      ,'magnet_belt_x'\r\n                      ,'magnet_belt_y'\r\n                      ,'magnet_belt_z'\r\n                      ,'roll_arm'\r\n                      ,'pitch_arm'\r\n                      ,'yaw_arm'\r\n                      ,'total_accel_arm'\r\n                      ,'gyros_arm_x'\r\n                      ,'gyros_arm_y'\r\n                      ,'gyros_arm_z'\r\n                      ,'accel_arm_x'\r\n                      ,'accel_arm_y'\r\n                      ,'accel_arm_z'\r\n                      ,'magnet_arm_x'\r\n                      ,'magnet_arm_y'\r\n                      ,'magnet_arm_z'\r\n                      ,'roll_dumbbell'\r\n                      ,'pitch_dumbbell'\r\n                      ,'yaw_dumbbell'\r\n                      ,'total_accel_dumbbell'\r\n                      ,'gyros_dumbbell_x'\r\n                      ,'gyros_dumbbell_y'\r\n                      ,'gyros_dumbbell_z'\r\n                      ,'accel_dumbbell_x'\r\n                      ,'accel_dumbbell_y'\r\n                      ,'accel_dumbbell_z'\r\n                      ,'magnet_dumbbell_x'\r\n                      ,'magnet_dumbbell_y'\r\n                      ,'magnet_dumbbell_z'\r\n                      ,'roll_forearm'\r\n                      ,'pitch_forearm'\r\n                      ,'yaw_forearm'\r\n                      ,'total_accel_forearm'\r\n                      ,'gyros_forearm_x'\r\n                      ,'gyros_forearm_y'\r\n                      ,'gyros_forearm_z'\r\n                      ,'accel_forearm_x'\r\n                      ,'accel_forearm_y'\r\n                      ,'accel_forearm_z'\r\n                      ,'magnet_forearm_x'\r\n                      ,'magnet_forearm_y'\r\n                      ,'magnet_forearm_z'\r\n                      ,'classe' )]  `              \r\n\r\n\r\n###FIT MODEL -- RANDOM FOREST \r\n\r\nUsing random forest algorithm to predict classe (best accuracy compared to tree). \r\n\r\n`fit_forest<-train(classe ~ . , data = mytrain, method=\"rf\") ## fit a random forest `\r\n\r\n### PREDICTION AND ACCURACY \r\nNow that the model is fitted we can use the test set to estimate the accurary of the model \r\n\r\n`preds<-predict(fit_forest$finalModel,newdata= mytest)`\r\n\r\n\r\n`confusionMatrix(preds,mytest$classe)`\r\n\r\nThe accuracy is : \r\n\r\n` Accuracy : 0.9912 `         \r\n `95% CI : (0.9889, 0.9932)`\r\n \r\n \r\n \r\n\r\n\r\n\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}